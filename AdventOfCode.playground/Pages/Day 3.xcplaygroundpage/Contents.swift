import Foundation

let input = """
.##.....#....#....#..#.#...#.##
.###........#.##....#......#..#
#..#..#.....#...#....#.#.......
.........#.................#...
..#.......#.#.......#.......#.#
.####........#.#..##.........#.
........#.........#.........#..
#..##...##....#.....##......#..
.........#..............#......
#.........#...##.........#.#...
..............#........##.....#
##....#...........#....#.#...#.
.....#..#.....#...#.#..........
#.......#...#..##........##..#.
.#........#.......#............
.......##.....#.#.#..#.#.......
..#......#..#....##......#.#...
.....##....#..#.....#..#.......
.............#.......#.#....#..
.................#.#......#....
.#..#....#..........#.....#.##.
#.#.#.#.....###.......#.....#..
#...#..........#..#............
...#...##.......#.##..#........
..#...#.#.##...##.........#.#.#
.....#...#.#....#.#.....#......
...#...#.#..#...#.....#........
...........###.#.......#.#.....
..#..#.#........#.#.......#.#.#
.#.......#...........#.........
.#..#...##....#.......###..##..
#....#.....#....##..#.........#
#..#.......#...#......#.#....#.
......##..#..#....#.#........##
#.....#.........#......#..##..#
.#..#.......#....#............#
....#..........#.#...##....#.##
..#...#.#...#.###.#..#......#..
#.#...#..............#.......#.
..##.......#......#....###.....
......#.......#.#.##.#..##.#...
.#......#......#.#....#..#.#..#
....#....#..#...#.....#.#..#...
.#.....#.#.#..#........#.#.###.
#..#..#.#......#..#..#....#.#..
..#.###....#....##...#.........
...........#..#...........#....
.................#..........#.#
.#.#....#..#........#..#.......
...........##..#...............
...#.##.........#.........#.#.#
........#..#....#.#............
...##...##..................#.#
...#..##..#...#......#.....#..#
.##.#..#..#......#......#.....#
....#.....#....#......##.#.....
.....#.##....#...#.............
......#...#.....##....#...#..##
...#............#.###....##....
............#.#.#...#.#........
#.....#..#.#..##...........#.##
.....#.#.#.#..##......##.#..#..
.#.##..#.........#......#.....#
.#.#.#.#.#..#..#........###....
......##..........#.#.....##..#
..#...#..#.....#.#.....#.......
............#....#.............
........#...#..#....#.#..###...
#........##....##..............
.........#.#.#..#..#...#.#.....
....#............#....####...#.
##.#.#......#.....#...#....###.
...#..#..#..#.......#..#.#.#..#
..#..#....#...#.##..#.........#
#..#.#....#....#...#..##..#.#..
...#....#.............#..#.#..#
..#......#.##...#..............
#....##.#.#...##......#.....##.
.#...##...#...####.....##......
...........#.###....#...#...#..
##..#..##..#..#.#.#..###.......
.#...##......#........##..#....
.#...#...#.....#............#..
.#.#.#...#.#..#.......#......#.
.................#..#.#......#.
#..#####......##.#....#...#....
........#......#.....##......#.
....#.#...#...#..#.......#####.
.....##......#...#.......#....#
.#....#...#..#...#.#...#..#...#
....##.........#.#...####.#....
...##..........#.#.......##....
.........#......#.....#....#...
#....##..#......#.....##....#..
...#.#.............#...#.....#.
...........#...#.#....#..#.#...
.......#.#.#.....#..#........#.
..##.....#..#.....##..#........
...#.#..........#...#....#.#...
..#....#......#...#.#...##..#.#
.#...#..#..#..#.......#........
.................#.#...........
...............#......##.....#.
..##.....###..#....#.........##
....#.#........#.####.#...#....
.....#.....##..####..##.......#
.....####.#...#......#.........
........#..#......#.....##.....
...###..#.#..###.......#.......
...#...##..#..#..#..#.##.......
..#......##..#.....##..##......
#.......#.#..#.................
#.......#...#..###....#.#.#.#..
#...#.#....##.##.#...........#.
.#.........#..###..#.........#.
#...#......#...#.#.........#...
.#.##..............#.#....#...#
........#.....#..#.#.#......#..
............####.#......#......
......#.#.#...#.#...#.#.....#..
....#....#...#.....#.......#.#.
..#....#....###..#....#.....##.
.................#.....#.#....#
.#.............#......#.##..#..
#.....##.......#..#.....#....#.
#.#......####...##.....#....##.
.....#.#....#..................
....#....#..#.#...........##...
...#.............##......#..#..
......#..........#...#...##.###
...##......##.....#......#....#
........#.#.#...#...#..##......
......................###....##
.#.....#..#..#.##.#.#.#....#.##
.#..............#.....#......#.
.#...#.##....#.....#.#.#..#..#.
##...##.......#.....#..###.....
...#..#.#....#........#........
....#..............##...#......
...........#..#.....##.#.#.#...
#.#.....##..##.#.#........#....
.........#....#.....#..##.#...#
...#...#..#..#.####...#.......#
.....##.....##.....#......#....
#.##...#....#............#..##.
.#.##..#...#....#.#......#.....
..###................#.........
.#..#..#................#......
....#..#........#..#....#......
.#..........###......#...###...
...........##...#.#..#.........
...#....#..........#.....#..##.
..#..#.............#......###..
#....#....##.....#....#.##.....
......#.......#..#..........##.
#..##.#...#.#.........#....#.#.
...#...#..........#...#..#....#
...###..#.#......#.##.#####...#
..#.....#.#..............#..##.
#..###......#.#..#........#....
.#.......#.......#.....#.##....
.#...##..#.......##.....#....##
..........#.#..#.....#.........
.......####...#...#.....##.....
......#.......#.......#..#.#...
...##....##.#.......#.##......#
.#...#............#......##....
#..#..#...#.#........#.........
.......#.......#.....##.#......
.#....##...#....#.........#...#
#.#....#.....##...........#..#.
.....#......#....#......#.#...#
.#............#...#.#....#....#
........##..#..##..##.##....#..
........................#.#....
#....#...#.....................
##.#.............#.....#...##.#
....##....###.......#..........
..#.#..#.#...####.....#.....#..
#.........#.......#......#..##.
.#.#.............#..#...#...#..
#..#....#....#..##.........#...
#.#.....#.##.#...#.##..#.#..##.
......#......#.###....#..###...
.##...#.......#.........#.#...#
..........#...#....#..#....#...
.....#...#.....#....##....#.#..
#....#...........#.#...#.......
.###..#........##..........#...
....###.##..#...#.#..##......##
.#...#...........#...........#.
#......#....#.##.........##..#.
.#.......#........#......#.#.#.
.......#..##.........#......#..
.#..#.....##....##....#.....#..
#.#.#.....#...#......#.........
..............#.#.........#.#..
....#...#.............#.#......
..##.#............#.#.##....#..
.....####..........#.#....##..#
......#.#.........#.......###..
#....##.#...#.#...........#...#
.....#...#......#....###...#..#
#....#..............#...#......
...#..###...#..........#....#..
#......#..#.#.#......#..#...#..
................##......#..#...
....#..#..#........##..#...#...
...##.......#.##.#.....##...#.#
.......#.##.#..#.....#...#.....
......#........#..#......##.##.
....................#.....#.#..
.##....#...#...##...#.........#
..#...#..#.##..#.#.#......#....
#....###.#..#..#...#..#...##...
#.......#.....#.#.......###.#.#
.#.##...##..#......#....#...#..
#.....#.......##..#....#.......
...###...#............#....#..#
.#....#.#...#..#..#.##.#.#.#...
#......#.#..#.#.#......#.......
..#..#....###.#........#..#.#..
.......#......##.........#.....
...#...###..#..#.##.#..##......
.#.......##.......#..#..#.###.#
.###.#..#.###...........#......
...#................#.#...##..#
....#.###....#.......#........#
.##...#...#..#.....#...#.......
.#...#..#...........#.#......##
...##..#.#.#..#.#.#.......#....
.#.#..#..#.#...........#.......
..#....#.#.#.#.#..............#
..##..............##....#.#..#.
..#....#...##.....###.....#.#.#
#....#......#..........##......
.##.#.#......#...##..###..#....
.#...........#.##.......##..##.
###.....##...#.##..#...........
...#.....#...........#..#.....#
#.........#....#.......#.......
.#.#...#.###....#..#...........
.....#.......#.....#.##.#.#.#..
..##.#.........##.........#..#.
.......#....#......#.........##
...##.....#..#.......#..#.#....
..#...###.......#..#....###....
.......#...###......#.#.....#.#
#....#...#.#....#.#..........#.
........#..#.....#.#.#.........
......##.......###.......#...#.
.........#..#..#.......#.......
#.......#...#.....#.#..#....#..
.##....#..###.............#....
#.#...#.......#.....##.#.#....#
....#....##.#........##........
...##...#.#.............#...##.
##....#.....#..#..#......#.....
#...#.#........##....##......##
..#...........#..#......###....
..##..#.....#......#....##.....
....###.#...#......##......#...
....#....###...........###.#..#
..#....#...#.##....#...#.......
....##...........#............#
..#.#......#......#.##.#...#..#
#.###.............#.#.##.#.....
#....##....#..#.#.#...........#
...#...................#.......
.#...#......#.......#.#....#..#
....#...#..#..#..#.#.....#....#
..#....#............#..###..##.
...##...#...........#..#..#.#..
..#..#..#.........#.........#.#
...#.#.....#.#..##.........#...
....#..........................
....#.....#.#...#.###.........#
....#.#.......#..#.#.#...#...#.
.....#...#..#.....##....#.#.#..
#....###......#..#..........#..
.#.....#......##.......#...#.##
...#..#.....#.#.....#.......##.
............#..#....#...#..#.#.
..........#.#..#..##...........
.......#.......#..##...##.....#
....#...##.#..#...#.#.......#..
....#.#........#...####...#....
#.#.............#.............#
.#.#......#....#..#..#.....##.#
#..#...........#........#.....#
#....#....#.#..#.#....#.#...##.
....##...##...#...#...........#
...#.#..#....#..#..#..#........
...#..##..#........#..........#
#......#.##..##.......#..#.....
..#...#......#...##.#..........
.###.#..#..#........####...#...
#..............#.#.#........#..
..##....#.......#....##...#..##
.##...#..#.#.....#..#.......##.
..#.........##.......#....#..#.
.#..#...#..##.#..#.....#.......
.#....#.........#..#...#...##..
..###..######..#.##.#....#.....
....#..#.....#.............#..#
...#....#.......#..#.#.......##
.....#......#.......#..##...#..
.##..#....##..##......#...#..#.
......#......#...#...###.......
....#.....#.###..##.....#.#.##.
.......#....#...#..#..#...#.#..
...####.#...#...#.#...##....#..
......#.#....#....#.#....##....
#..##...........####....##.#...
...#...##.#.......#.#..........
..#......#..#..#...#......#....
..###..#.....#..#.#.......#...#
#........#...##..#...#....#....
...#.#...#.....#........#...#..
...#....#.###...#..#...#..##.#.
.....#..#..#...#...#..#........
..#......##...............#.#.#
.#...###.#....##..........#.#..
"""

class TreeFinder {
    struct Config {
        let columnTraversalWidth: Int
        let rowTraversalWidth: Int
    }

    let config: Config

    init(config: Config) {
        self.config = config
    }

    func numberOfTrees(input: String) -> Int {
        let grid = input.components(separatedBy: "\n")
        var rowIndex: Int = 0
        var columnIndex: Int = 0
        var trees = 0
        while rowIndex < grid.count {
            let row = grid[rowIndex]
            let normalizedColumnIndex = columnIndex % row.count

            let characterIndex = row.index(row.startIndex, offsetBy: normalizedColumnIndex)
            let character = row[characterIndex]

            if String(character) == "#" { trees = trees + 1 }

            rowIndex = rowIndex + config.rowTraversalWidth
            columnIndex = columnIndex + config.columnTraversalWidth
        }
        return trees
    }
}

let configOne = TreeFinder.Config(columnTraversalWidth: 1, rowTraversalWidth: 1)
let configTwo = TreeFinder.Config(columnTraversalWidth: 3, rowTraversalWidth: 1)
let configThree = TreeFinder.Config(columnTraversalWidth: 5, rowTraversalWidth: 1)
let configFour = TreeFinder.Config(columnTraversalWidth: 7, rowTraversalWidth: 1)
let configFive = TreeFinder.Config(columnTraversalWidth: 1, rowTraversalWidth: 2)

let trees = [configOne, configTwo, configThree, configFour, configFive].map { config -> Int in
    let treeFinder = TreeFinder(config: config)
    return treeFinder.numberOfTrees(input: input)
}

let total = trees.reduce(1, *)

